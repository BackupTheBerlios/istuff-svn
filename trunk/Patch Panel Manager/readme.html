<html><head><meta name=Title content="Patch Panel Manager scripts"><meta http-equiv=Content-Type content="text/html; charset=macintosh"><title>Patch Panel Manager scripts</title><style><!--.Section1	{page:Section1;}--></style></head><body bgcolor=#FFFFFF class="Normal" lang=EN-US><div class=Section1>   <h2>Patch Panel Manager</h2>  <p>Patch Panel Manager is a GUI for configuring mappings in the Patch Panel.     It provides are three methods of configuring mappings:</p></div><ul>  <li> Simple mode (documentation coming)</li>  <li>Advanced mode (documentation coming)</li>  <li>     <div class=Section1><a href="#scripts">Scripts</a> (see below)</div>  </li></ul><div class=Section1>  <hr>  <h2><b><a name="scripts"></a>Writing Patch Panel Manager scripts</b></h2>  <p>Patch Panel Manager can read in a script file and configures the Patch Panel     accordingly. A PP Manager script file describes sets of events, states, global     variables, and transitions. As an example is displayed below with annotations.</p>  <h3><b>Usage:</b></h3></div><ul>  <li><strong>From GUI:</strong> Launch the PP Manager and click on the &quot;Advanced&quot;     tab, then click on to &quot;Import Group...&quot; and navigate to a script     file</li>  <li><strong>From command line:</strong> <br>    <code>java -cp iROS.jar iwork.patchpanel.manager.PPManager -s doubleclick.txt     iw-room2.stanford.edu 4535</code> </li></ul>    <div class=Section1>        <h3><b>doubleclick.txt:</b></h3>    </div><pre>// Patch Panel group must have a unique name so that its states can be// delineated from states of other PP scripts.group DoubleClickScript;// GLOBAL VARIABLE DECLARATIONS:// -----------------------------// These are the only declarations that must actually be at the top of the file.// It's not reflected below, but the event declarations and the state// declarations below can be freely intermingled.//// (I'm working on relaxing this further so that the variables can be intermingled too,// but this is a tricky issue, so for now global variables won't always work unless they're// at the top.)//// Init values must be specified and must be constants (they can't be set based on// input events or other global variable values.int numDoubleClicks = 1;int numSingleClicks = 0;// EVENT DECLARATIONS:// -------------------// These are specifications for events that will be used later in the program.// Each event has both a unique name (only used within this script) as well as// an actual EventTypeevent MyDoubleClickEvent type DoubleClickEvent {      // Event fields:      // -------------      // Each field in an event has a type, a name (optionally in quotes), "=", and then a post value,      // (and then optionally a comma then a template value) then a semicolon.      // Valid values are int, short, float, long, double, boolean, string constant (in quotes),      // or FORMAL or VIRTUAL (not in quotes). Equation strings can be used and they      // will work as expected (but the field type must be 'string').      //       // Now, equations can be entered directly into the field and they'll work pretty much      // as you would expect if you were using Java or C. Prefixing names of global variables      // with "global." is optional, as seen below. Values of "in." and "out." variables can be      // use this way too, but they must be prefixed.      int DoubleClicked = 1;      string "DeviceName" = "=(string) in.DeviceName";      int numDoubleClicks = global.numDoubleClicks;      string doublePlusSingle = "=(int) global.numDoubleClicks", FORMAL;      int "doubleTimesSingle" = numDoubleClicks * numSingleClicks;}event MyClickEvent type ClickEvent {      int "ButtonState" = 1, 1;      string DeviceName = "helloWorld", "helloWorld";}event MyInitialEnteredEvent type InitialStateEnteredEvent {        // Empty events are allowed, they will only have default fields.}event EvenClicks type EvenClicksEvent {      int "NumClicksOverTwo" = numSingleClicks / 2;}even OddClicks type OddClicksEvent {}event Mult3 type Mult3ClicksEvent {      string message = "the number of clicks is a multiple of 3";}event Rem2 type Rem2Event {      string message = "the number of clicks over 3 has remainder 2";}event Rem1 type Rem1Event {      string message = "the number of clicks over 3 has remainder 1";} // STATE DECLARATIONS// ------------------// There must be a state called "Initial" which will be the starting statestate Initial {          // on entering this state, the "on enter" trigger will be executed :	           on enter {              send MyInitialEnteredEvent;          }          // when a MyClickEvent (as defined above) is received in state Initial,          // this trigger will be executed:          on MyClickEvent {                        set timer 500;                            send MyDoubleClickEvent;              goto OneClickDone;                            numSingleClicks = numSingleClicks + 1;                            // Switch statements are a little different from C and Java:              // Each case must be a constant and the type of the test equation              // must come after "switch". Also,               // The flow of control will never cover multiple case blocks              // (there is no equivalent of "break" in patchscript since it is               // a declarative rather than imperative language).                            switch int (numSingleClicks % 3) {                  case 0 {                      send Mult3;                  } case 1 {                      send Rem1;                  } case 2 {                      send Rem2;                  }              }          }}state OneClickDone {          on MyClickEvent {              goto Initial;              numSingleClicks = numSingleClicks + 1;                            if (numSingleClicks % 2 == 0) {                  send EvenClicks;              } else {                  send OddClicks;              }                            // if, else, and else if all work as you'd expect.              // Nested if statements are also allowed, and you can nest if statements              // in switch statements and vice versa.              // The "{" and "}" surround an if-block are mandatory, unlike in C and Java          }          on timer {              goto Initial;          }}</pre><div class=Section1>   <hr>  <p><i>11 February 2004, Andy Szybalski, andys@cs.stanford.edu</i></p></div></body></html>