import java.io.File;
import java.io.IOException;
import java.util.List;
import java.util.ListIterator;
import java.util.Vector;

import org.jdom.Document;
import org.jdom.Element;
import org.jdom.JDOMException;
import org.jdom.input.SAXBuilder;

public class ConfigDataHolder {
	
	private static Element _xmlRoot;
	
	public ConfigDataHolder () {
		Document docWithConfig = new Document();
		SAXBuilder builder = new SAXBuilder();
		//Element xmlRoot = null;
		try {
			// Load the configuration file
			File configFile = new File("configStarter.xml");
			docWithConfig = builder.build(configFile);
			_xmlRoot = docWithConfig.getRootElement();
			System.out.println("Processing XML - file");
		} catch (JDOMException e) {
			System.out.println("The XML - file may be corrupt");
		} 
		catch (IOException e) {
			System.out.println("No configFile found. New file created");
			new PreferencesDialog();
		}
	}
	
	public Vector <File> getSearchDirectories () {
		Vector <File> searchDirectories = new Vector <File> ();
		// Now construct the proxyTree from the specified search directories
		if (_xmlRoot != null) {
			Element searchDirs = _xmlRoot.getChild("SearchDirectories");
			List xmlElements = searchDirs.getChildren();
			for (ListIterator xmlIterator = xmlElements.listIterator(); xmlIterator
					.hasNext();) {
				Element currentElement = (Element) xmlIterator.next();
				File newDirectory = new File(currentElement.getValue());
				searchDirectories.add(newDirectory);
			}			
		}
		return searchDirectories;
}
}

