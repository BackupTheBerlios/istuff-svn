import java.io.File;
import java.io.IOException;

public class EventHeapThread extends Thread implements Runnable{

	  public void run()
	  {
			try {
				File env = new File(_xmlRoot.getChild("EventHeapLocation").getValue());
				// Construct launch commnand for the event heap
				// from the information in the XML file.
				String iROSLoc = _xmlRoot.getChild("Libraries").getChild("iROS").getValue();
				String jmdnsLoc = _xmlRoot.getChild("Libraries").getChild("JmDNS").getValue();
				String cmd = "java -cp " + iROSLoc 
				+ _separator + jmdnsLoc + " "
				+ "iwork.eheap2.server.EventHeapServer";
				if (_startLocalEHButton.isSelected()) {
				_startLocalEHButton.setText("Stop local EH");
				// lock the button until the service is actually running.
				_startLocalEHButton.setEnabled(false);
				try {
					_ehProcess = Runtime.getRuntime().exec(cmd, null, env);
					System.out.println("Eh is running");
				} catch (IOException e1) {
					e1.printStackTrace();
				}
			} else {
				_startLocalEHButton.setText("Start local EH");
				System.out.println("EH stopped");
				_ehProcess.destroy();
			}
		  
		  File env = new File("/Users/rene/DiplomaThesis/Programming/trunk/Event\\ Heap");
		  System.out.println("Env Path: " + env);
		  try {
			   Process _ehProcess = Runtime.getRuntime().exec(
					  "java -cp ../Lib/iROS.jar:../Lib/jmdns.jar iwork.eheap2.server.EventHeapServer",null,env);
		  }
		  catch (IOException e) {
			e.printStackTrace();
		}

	  }

}
