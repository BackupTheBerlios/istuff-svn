<html>
<head>
 
<title>TELEO APPLICATION SDK</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="code.css" type="text/css">
</head>

<body bgcolor="#FFFFFF" text="#000000" link="619ec3" vlink="619ec3" alink="619ec3">

<table width="100%" border="0" cellspacing="0" cellpadding="-1">
  <tr> 
    <td width="1%" rowspan="2" bgcolor="#FFFFFF" valign="top"><a href="/index.htm"><img src="images/logo_header_blue.jpg" width="263" height="123" border="0"></a></td>
    <td height="109" bgcolor="395e7a" width="100%" valign="bottom" align="left"> 
      <p>&nbsp;</p>
      <table width="100%" border="0">
        <tr> 
          <td width="20%" height="20" class="medium_bold"> 
            <div align="center">
              <font color="619ec3" class="medium_bold"><a href="http://www.makingthings.com/home.htm">HOME</a></font>
            </div>
          </td>
          <td width="20%" height="20" class="medium_bold"> 
            <div align="center"><font color="619ec3" class="medium_bold"><a href="http://www.makingthings.com/projects.htm">PROJECTS</a></font></div>
          </td>
          <td width="20%" height="20" class="medium_bold"> 
            <div align="center"><font color="#FFFFFF" class="medium_bold"><b class="medium_bold">PRODUCTS</b></font></div>
          </td>
          <td width="20%" class="medium_bold" height="20"> 
            <div align="center"><font color="619ec3" class="medium_bold"><a href="http://www.makingthings.com/services.htm">SERVICES</a></font></div>
          </td>
          <td width="20%" class="medium_bold" height="20"> 
            <div align="center"><font color="619ec3" class="medium_bold"><a href="http://www.makingthings.com/news/news.htm">NEWS</a></font></div>
          </td>
        </tr>
      </table>
    </td>
  </tr>
  <tr> 
    <td width="100%" height="15">&nbsp;</td>
  </tr>
  <tr align="left" valign="middle"> 
    <td colspan="2"></td>
  </tr>
</table> 
<br>
<hr>

<font face="Arial, Helvetica, sans-serif" size="2">


<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; </center>
<hr><h1>TeleoInterfaceLinux.c</h1><a href="TeleoInterfaceLinux_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* Copyright 2003 MakingThings LLC. */</span>
00002 
00003 <span class="comment">/*</span>
00004 <span class="comment">: set tabstop=2 shiftwidth=2</span>
00005 <span class="comment"> */</span>
00006 
00011 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00012 <span class="preprocessor">#include &lt;string.h&gt;</span>
00013 <span class="preprocessor">#include &lt;errno.h&gt;</span>
00014 <span class="comment">//#include &lt;types.h&gt;</span>
00015 
00016 <span class="preprocessor">#include "<a class="code" href="TeleoInterface_8h.html">TeleoInterface.h</a>"</span>
00017 
00018 <span class="preprocessor">#include &lt;fcntl.h&gt;</span>
00019 <span class="preprocessor">#include &lt;termios.h&gt;</span>
00020 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00021 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00022 <span class="preprocessor">#include &lt;string.h&gt;</span>
00023 <span class="preprocessor">#include &lt;unistd.h&gt;</span>
00024 
<a name="l00029"></a><a class="code" href="structTeleoInterfaceInt.html">00029</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>
00030 <span class="keyword"></span>{
00031   <a class="code" href="structTeleoInterface.html">TeleoInterface</a> t;
00032   
00033   <a class="code" href="TeleoInterface_8h.html#a21">TI_InterfaceType</a> interfaceType;  
<a name="l00034"></a><a class="code" href="structTeleoInterfaceInt.html#m2">00034</a>   <span class="keywordtype">char</span> * name;                     
00035   
00036   <span class="keywordtype">int</span> deviceHandle;                
00037   
00038   <span class="keywordtype">bool</span> blocking;                   
00039 
00040   <span class="comment">// (ultimately) Union of all the different support data structures</span>
<a name="l00041"></a><a class="code" href="structTeleoInterfaceInt.html#m5">00041</a>   <span class="keyword">struct </span>termios terminalSettings;    
<a name="l00042"></a><a class="code" href="structTeleoInterfaceInt.html#m6">00042</a>   <span class="keyword">struct </span>termios terminalSettingsOld; 
00043 
00044 } <a class="code" href="structTeleoInterfaceInt.html">TeleoInterfaceInt</a>;
00045 
<a name="l00046"></a><a class="code" href="TeleoInterfaceLinux_8c.html#a0">00046</a> <a class="code" href="TeleoError_8h.html#a20">TeleoError</a> <a class="code" href="TeleoInterfaceLinux_8c.html#a0">TI_Create</a>( cchar* name, TI_InterfaceType interfaceType, <a class="code" href="structTeleoInterface.html">TeleoInterface</a>** ti )
00047 {
00048   TeleoInterfaceInt* teleoInterfaceP;
00049 
00050   *ti = NULL;
00051   
00052   teleoInterfaceP = (TeleoInterfaceInt*)malloc( <span class="keyword">sizeof</span>( TeleoInterfaceInt ) );
00053   <span class="keywordflow">if</span> ( teleoInterfaceP == NULL )
00054     <span class="keywordflow">return</span> <a class="code" href="TeleoError_8h.html#a20a16">TELEO_E_ALLOC</a>;
00055   memset( teleoInterfaceP, 0, <span class="keyword">sizeof</span>( TeleoInterfaceInt ) );
00056 
00057   <span class="keywordflow">if</span> ( name == NULL )
00058   {
00059     <span class="keywordflow">switch</span> ( interfaceType )
00060     {
00061       <span class="keywordflow">case</span> <a class="code" href="TeleoInterface_8h.html#a21a0">TI_USB</a>:
00062       <span class="keywordflow">case</span> <a class="code" href="TeleoInterface_8h.html#a21a1">TI_USB0</a>:
00063         name = <span class="stringliteral">"/dev/ttyUSB0"</span>;
00064         <span class="keywordflow">break</span>;
00065       <span class="keywordflow">case</span> <a class="code" href="TeleoInterface_8h.html#a21a2">TI_USB1</a>:
00066         name = <span class="stringliteral">"/dev/ttyUSB1"</span>;
00067         <span class="keywordflow">break</span>;
00068       <span class="keywordflow">case</span> <a class="code" href="TeleoInterface_8h.html#a21a3">TI_USB2</a>:
00069         name = <span class="stringliteral">"/dev/ttyUSB2"</span>;
00070         <span class="keywordflow">break</span>;
00071       <span class="keywordflow">case</span> <a class="code" href="TeleoInterface_8h.html#a21a5">TI_SERIAL</a>:
00072         name = <span class="stringliteral">"/dev/ttyS0"</span>;
00073         <span class="keywordflow">break</span>;
00074       <span class="keywordflow">case</span> <a class="code" href="TeleoInterface_8h.html#a21a10">TI_NETWORK</a>:
00075         name = <span class="stringliteral">""</span>;
00076         <span class="keywordflow">break</span>;
00077       <span class="keywordflow">default</span>:
00078         name = <span class="stringliteral">""</span>;
00079     }
00080   }
00081 
00082   <span class="keywordflow">if</span> ( name != NULL )
00083     teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m2">name</a> = strdup( name );
00084   
00085   teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m1">interfaceType</a> = interfaceType;
00086   
00087   teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m4">blocking</a> = <span class="keyword">false</span>;
00088 
00089   *ti = (<a class="code" href="structTeleoInterface.html">TeleoInterface</a>*)teleoInterfaceP;
00090   <span class="keywordflow">return</span> <a class="code" href="TeleoError_8h.html#a20a0">TELEO_OK</a>;
00091 }
00092 
<a name="l00093"></a><a class="code" href="TeleoInterfaceLinux_8c.html#a1">00093</a> <a class="code" href="TeleoError_8h.html#a20">TeleoError</a> <a class="code" href="TeleoInterfaceLinux_8c.html#a1">TI_destroy</a>( <a class="code" href="structTeleoInterface.html">TeleoInterface</a>* ti )
00094 {
00095   TeleoInterfaceInt* teleoInterfaceP = (TeleoInterfaceInt*)ti;
00096   
00097   <a class="code" href="TeleoInterfaceLinux_8c.html#a6">TI_close</a>( ti );
00098 
00099   <span class="keywordflow">if</span> ( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m2">name</a> != NULL )
00100     free( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m2">name</a> );
00101 
00102   free( teleoInterfaceP );
00103 
00104   <span class="keywordflow">return</span> <a class="code" href="TeleoError_8h.html#a20a0">TELEO_OK</a>;
00105 }
00106 
<a name="l00107"></a><a class="code" href="TeleoInterfaceLinux_8c.html#a2">00107</a> <a class="code" href="TeleoError_8h.html#a20">TeleoError</a> <a class="code" href="TeleoInterfaceLinux_8c.html#a2">TI_nameGet</a>( <a class="code" href="structTeleoInterface.html">TeleoInterface</a>* ti, cchar** name )
00108 {
00109   TeleoInterfaceInt* teleoInterfaceP = (TeleoInterfaceInt*)ti;
00110 
00111   <span class="keywordflow">if</span> ( teleoInterfaceP == NULL || name == NULL )
00112     <span class="keywordflow">return</span> <a class="code" href="TeleoError_8h.html#a20a9">TELEO_E_NULL_POINTER</a>;
00113 
00114   *name = teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m2">name</a>;
00115 
00116   <span class="keywordflow">return</span> <a class="code" href="TeleoError_8h.html#a20a0">TELEO_OK</a>;
00117 }
00118 
<a name="l00119"></a><a class="code" href="TeleoInterfaceLinux_8c.html#a3">00119</a> <a class="code" href="TeleoError_8h.html#a20">TeleoError</a> <a class="code" href="TeleoInterfaceLinux_8c.html#a3">TI_typeGet</a>( <a class="code" href="structTeleoInterface.html">TeleoInterface</a>* ti, cchar** type )
00120 {
00121   TeleoInterfaceInt* teleoInterfaceP = (TeleoInterfaceInt*)ti;
00122 
00123   <span class="keywordflow">if</span> ( teleoInterfaceP == NULL || type == NULL )
00124     <span class="keywordflow">return</span> <a class="code" href="TeleoError_8h.html#a20a9">TELEO_E_NULL_POINTER</a>;
00125 
00126   <span class="keywordflow">switch</span> ( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m1">interfaceType</a> )
00127   {
00128     <span class="keywordflow">case</span> <a class="code" href="TeleoInterface_8h.html#a21a0">TI_USB</a>:
00129       *type = <span class="stringliteral">"usb"</span>;
00130       <span class="keywordflow">break</span>;
00131     <span class="keywordflow">case</span> <a class="code" href="TeleoInterface_8h.html#a21a5">TI_SERIAL</a>:
00132       *type = <span class="stringliteral">"ser"</span>;
00133       <span class="keywordflow">break</span>;
00134     <span class="keywordflow">case</span> <a class="code" href="TeleoInterface_8h.html#a21a10">TI_NETWORK</a>:
00135       *type = <span class="stringliteral">"net"</span>;
00136       <span class="keywordflow">break</span>;
00137     <span class="keywordflow">default</span>:
00138       *type = <span class="stringliteral">"?"</span>;
00139   }
00140 
00141   <span class="keywordflow">return</span> <a class="code" href="TeleoError_8h.html#a20a0">TELEO_OK</a>;
00142 }
00143 
<a name="l00144"></a><a class="code" href="TeleoInterfaceLinux_8c.html#a4">00144</a> <a class="code" href="TeleoError_8h.html#a20">TeleoError</a> <a class="code" href="TeleoInterfaceLinux_8c.html#a4">TI_blockingSet</a>( <a class="code" href="structTeleoInterface.html">TeleoInterface</a>* ti, <span class="keywordtype">bool</span> blocking )
00145 {
00146   TeleoInterfaceInt* teleoInterfaceP = (TeleoInterfaceInt*)ti;
00147   <span class="keywordflow">if</span> ( teleoInterfaceP == NULL )
00148     <span class="keywordflow">return</span> ( TELEO_E_NULL_POINTER );
00149 
00150   teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m4">blocking</a> = blocking;
00151 
00152   <span class="keywordflow">return</span> <a class="code" href="TeleoError_8h.html#a20a0">TELEO_OK</a>;
00153 }
00154 
<a name="l00155"></a><a class="code" href="TeleoInterfaceLinux_8c.html#a5">00155</a> <a class="code" href="TeleoError_8h.html#a20">TeleoError</a> <a class="code" href="TeleoInterfaceLinux_8c.html#a5">TI_open</a>( <a class="code" href="structTeleoInterface.html">TeleoInterface</a>* ti )
00156 {
00157   TeleoInterfaceInt* teleoInterfaceP = (TeleoInterfaceInt*)ti;
00158 
00159   <span class="comment">// is there a structure?</span>
00160   <span class="keywordflow">if</span> ( !teleoInterfaceP )
00161     <span class="keywordflow">return</span>( TELEO_E_NULL_POINTER );
00162   
00163   <span class="comment">// is there a pointer to the device name?</span>
00164   <span class="keywordflow">if</span> (!teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m2">name</a>)
00165     <span class="keywordflow">return</span>( TELEO_E_NULL_POINTER );
00166 
00167   <span class="comment">// Open the port</span>
00168   <span class="comment">// weirdly, on my machine this call blocks if blocking is set!</span>
00169   <span class="comment">// so the solution is to open the port without blocking, then</span>
00170   <span class="comment">// if the open is successful, change the flag then</span>
00171   <span class="comment">// teleoInterfaceP-&gt;deviceHandle = open( teleoInterfaceP-&gt;name, O_RDWR | O_NOCTTY | ( ( teleoInterfaceP-&gt;blocking ) ? 0 : O_NONBLOCK ) );</span>
00172   teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a> = open( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m2">name</a>, O_RDWR | O_NOCTTY | O_NONBLOCK );
00173   <span class="keywordflow">if</span> ( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a> &lt; 0 )
00174   {
00175     printf( <span class="stringliteral">"Could Not OPEN port %s (Error %d) errno %d\n"</span>, teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m2">name</a>, teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a>, errno );
00176     teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a> = -1;
00177     <span class="keywordflow">return</span> ( TELEO_E_OPEN );
00178   }
00179   <span class="keywordflow">else</span>
00180   {
00181     <span class="comment">// why here?  see note above</span>
00182     fcntl( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a>, F_SETFL, O_RDWR | O_NOCTTY | ( ( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m4">blocking</a> ) ? 0 : O_NONBLOCK ) );
00183     <span class="comment">//if ( teleoInterfaceP-&gt;interfaceType == TI_SERIAL )</span>
00184     {
00185       tcgetattr( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a> ,&amp;teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m6">terminalSettingsOld</a> ); 
00186       bzero( &amp;teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m5">terminalSettings</a>, <span class="keyword">sizeof</span>( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m5">terminalSettings</a> ) );
00187     
00188       teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m5">terminalSettings</a>.c_cflag = B115200 | CS8 | CREAD | CRTSCTS;
00189       teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m5">terminalSettings</a>.c_iflag = IGNPAR;
00190       teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m5">terminalSettings</a>.c_oflag = 0;
00191       teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m5">terminalSettings</a>.c_lflag = 0;
00192   
00193       <span class="keywordflow">if</span> ( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m4">blocking</a> )
00194       {
00195         teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m5">terminalSettings</a>.c_cc[VTIME]    = 0;   <span class="comment">// inter-character timer unused</span>
00196         teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m5">terminalSettings</a>.c_cc[VMIN]     = 1;   <span class="comment">// blocking read until 1 chars received</span>
00197       }
00198     
00199       tcflush( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a>, TCIFLUSH );
00200       tcsetattr( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a>, TCSANOW, &amp;teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m5">terminalSettings</a> );
00201     }
00202   }
00203 
00204   <span class="keywordflow">return</span> <a class="code" href="TeleoError_8h.html#a20a0">TELEO_OK</a>;
00205 }
00206  
<a name="l00207"></a><a class="code" href="TeleoInterfaceLinux_8c.html#a6">00207</a> <a class="code" href="TeleoError_8h.html#a20">TeleoError</a> <a class="code" href="TeleoInterfaceLinux_8c.html#a6">TI_close</a>( <a class="code" href="structTeleoInterface.html">TeleoInterface</a>* ti )
00208 {
00209   TeleoInterfaceInt* teleoInterfaceP = (TeleoInterfaceInt*)ti;
00210   
00211   <span class="comment">// is there a structure?</span>
00212   <span class="keywordflow">if</span> ( !teleoInterfaceP )
00213     <span class="keywordflow">return</span>( TELEO_E_NULL_POINTER );
00214 
00215   <span class="comment">// should put the terminal settings back now, I guess</span>
00216   tcsetattr( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a>, TCSANOW, &amp;teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m6">terminalSettingsOld</a> ); 
00217   
00218   <span class="keywordflow">if</span> ( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a> != -1 )
00219   {
00220     close( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a> ); 
00221     teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a> = -1;
00222   }
00223 
00224   <span class="keywordflow">return</span> <a class="code" href="TeleoError_8h.html#a20a0">TELEO_OK</a>;
00225 }
00226 
00227 <span class="comment">//</span>
00228 <span class="comment">// asks the serial port for a char</span>
00229 <span class="comment">// returns TELEO_OK if a char is returned</span>
00230 <span class="comment">// returns TELEO_E_NOTHING if there is no char</span>
00231 <span class="comment">// returns TELEO_E_UNKNOWN otherwise</span>
00232 <span class="comment">//</span>
<a name="l00233"></a><a class="code" href="TeleoInterfaceLinux_8c.html#a7">00233</a> <a class="code" href="TeleoError_8h.html#a20">TeleoError</a> <a class="code" href="TeleoInterfaceLinux_8c.html#a7">TI_get</a>( <a class="code" href="structTeleoInterface.html">TeleoInterface</a>* ti, uint8* cp, <span class="keywordtype">int</span> countIn )
00234 {
00235   <span class="keywordtype">int</span> count;
00236   
00237   TeleoInterfaceInt* teleoInterfaceP = (TeleoInterfaceInt*)ti;
00238   <span class="comment">// is there a structure?</span>
00239   <span class="keywordflow">if</span> ( !teleoInterfaceP )
00240     <span class="keywordflow">return</span>( TELEO_E_NULL_POINTER );
00241 
00242   count = read( (<span class="keywordtype">int</span>)teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a>, cp, 1 );
00243   
00244   <span class="keywordflow">switch</span> ( count )
00245   {
00246     <span class="keywordflow">case</span> 0:
00247       <span class="keywordflow">if</span> ( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m4">blocking</a> )
00248         printf( <span class="stringliteral">"Closed Errno = %d\n"</span>, errno );
00249       <span class="keywordflow">return</span> (TELEO_E_NOTHING);
00250     <span class="keywordflow">case</span> 1:
00251       <span class="comment">// got a character</span>
00252       <span class="keywordflow">return</span> (TELEO_OK);
00253     <span class="keywordflow">case</span> -1:
00254       <span class="comment">// no character waiting</span>
00255       <span class="comment">//printf( "Errno = %d", errno );</span>
00256       <span class="keywordflow">return</span> (TELEO_E_UNKNOWN);
00257     <span class="keywordflow">default</span>:
00258       <span class="comment">//printf( "DeF Errno = %d", errno );</span>
00259       <span class="comment">// dunno what this could be</span>
00260       <span class="keywordflow">return</span> (TELEO_E_UNKNOWN);
00261   }
00262 }
00263 
<a name="l00264"></a><a class="code" href="TeleoInterfaceLinux_8c.html#a8">00264</a> <a class="code" href="TeleoError_8h.html#a20">TeleoError</a> <a class="code" href="TeleoInterfaceLinux_8c.html#a8">TI_put</a>( <a class="code" href="structTeleoInterface.html">TeleoInterface</a>* ti, uint8* cp, <span class="keywordtype">int</span> count )
00265 {
00266   TeleoInterfaceInt* teleoInterfaceP = (TeleoInterfaceInt*)ti;
00267   <span class="comment">// is there a structure?</span>
00268   <span class="keywordflow">if</span> ( !teleoInterfaceP )
00269     <span class="keywordflow">return</span>( TELEO_E_NULL_POINTER );
00270   
00271   <span class="keywordflow">if</span> ( write( teleoInterfaceP-&gt;<a class="code" href="structTeleoInterfaceInt.html#m3">deviceHandle</a>, cp, count ) == count )
00272     <span class="keywordflow">return</span> <a class="code" href="TeleoError_8h.html#a20a0">TELEO_OK</a>;
00273   <span class="keywordflow">else</span>
00274   {
00275     <span class="comment">//printf( "Message Send Failed\n" );</span>
00276     <span class="keywordflow">return</span> <a class="code" href="TeleoError_8h.html#a20a8">TELEO_E_IO</a>;
00277   }
00278 }
00279 
<a name="l00280"></a><a class="code" href="TeleoInterfaceLinux_8c.html#a9">00280</a> <a class="code" href="TeleoError_8h.html#a20">TeleoError</a> <a class="code" href="TeleoInterfaceLinux_8c.html#a9">TI_SleepMs</a>( <span class="keywordtype">long</span> ms )
00281 {
00282     usleep( 1000*ms );
00283       <span class="keywordflow">return</span> <a class="code" href="TeleoError_8h.html#a20a0">TELEO_OK</a>;
00284 }
00285 
</pre></div></font>
<p>&nbsp;</p> 
<table width="100%">
  <tr>
    <td colspan="2" bgcolor="395e7a"> 
      <p align="center"><font color="#FFFFFF" class="small">copyright &copy; 2002, 2003 
        MakingThings LLC</font></p>
    </td>
  </tr>
</table>
 
<p>&nbsp;</p> 
</body>
</html>
